From e93a1a59a66d13f8de1e57c029970c316f421cd7 Mon Sep 17 00:00:00 2001
From: zhangyu <zhangyu4@kylinos.cn>
Date: Fri, 10 May 2024 12:20:10 +0800
Subject: [PATCH 2/2] rt1

---
 arch/arm64/configs/openeuler_defconfig | 4 ++--
 arch/x86/configs/openeuler_defconfig   | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/arch/arm64/configs/openeuler_defconfig b/arch/arm64/configs/openeuler_defconfig
index 4932a6be9..24873c5be 100644
--- a/arch/arm64/configs/openeuler_defconfig
+++ b/arch/arm64/configs/openeuler_defconfig
@@ -97,7 +97,7 @@ CONFIG_PREEMPT_NONE=y
 # CONFIG_PREEMPT_VOLUNTARY is not set
 # CONFIG_PREEMPT is not set
 # CONFIG_PREEMPT_DYNAMIC is not set
-
+CONFIG_PREEMPT_RT=y
 #
 # CPU/Task time and stats accounting
 #
@@ -754,7 +754,7 @@ CONFIG_HAVE_KVM_VCPU_RUN_PID_CHANGE=y
 CONFIG_KVM_XFER_TO_GUEST_WORK=y
 CONFIG_KVM_GENERIC_HARDWARE_ENABLING=y
 CONFIG_KVM_HISI_VIRT=y
-CONFIG_VIRTUALIZATION=y
+#CONFIG_VIRTUALIZATION is not set
 CONFIG_KVM=y
 # CONFIG_NVHE_EL2_DEBUG is not set
 CONFIG_KVM_ARM_MULTI_LPI_TRANSLATE_CACHE=y
diff --git a/arch/x86/configs/openeuler_defconfig b/arch/x86/configs/openeuler_defconfig
index 9b5df8585..ece62e3df 100644
--- a/arch/x86/configs/openeuler_defconfig
+++ b/arch/x86/configs/openeuler_defconfig
@@ -112,11 +112,11 @@ CONFIG_BPF_SCHED=y
 # end of BPF subsystem
 
 CONFIG_PREEMPT_NONE_BUILD=y
-CONFIG_PREEMPT_NONE=y
+#CONFIG_PREEMPT_NONE is not set
 # CONFIG_PREEMPT_VOLUNTARY is not set
 # CONFIG_PREEMPT is not set
 # CONFIG_PREEMPT_DYNAMIC is not set
-
+CONFIG_PREEMPT_RT=y
 #
 # CPU/Task time and stats accounting
 #
@@ -248,7 +248,7 @@ CONFIG_SYSCTL=y
 CONFIG_HAVE_UID16=y
 CONFIG_SYSCTL_EXCEPTION_TRACE=y
 CONFIG_HAVE_PCSPKR_PLATFORM=y
-# CONFIG_EXPERT is not set
+CONFIG_EXPERT=y
 CONFIG_UID16=y
 CONFIG_MULTIUSER=y
 CONFIG_SGETMASK_SYSCALL=y
@@ -744,7 +744,7 @@ CONFIG_HAVE_KVM_NO_POLL=y
 CONFIG_KVM_XFER_TO_GUEST_WORK=y
 CONFIG_HAVE_KVM_PM_NOTIFIER=y
 CONFIG_KVM_GENERIC_HARDWARE_ENABLING=y
-CONFIG_VIRTUALIZATION=y
+# CONFIG_VIRTUALIZATION is not set
 CONFIG_KVM=m
 CONFIG_KVM_INTEL=m
 CONFIG_X86_SGX_KVM=y
-- 
2.43.0

