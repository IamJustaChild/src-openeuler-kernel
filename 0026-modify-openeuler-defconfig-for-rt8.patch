From 245276b8e1765712eeab7ecd5a702e123ed41a15 Mon Sep 17 00:00:00 2001
From: kylin-mayukun <mayukun@kylinos.cn>
Date: Sat, 6 May 2023 09:22:53 +0800
Subject: [PATCH 2/2] modify openeuler defconfig for rt8

Signed-off-by: kylin-mayukun <mayukun@kylinos.cn>
---
 arch/arm64/configs/openeuler_defconfig | 5 +++--
 arch/x86/configs/openeuler_defconfig   | 5 +++--
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/configs/openeuler_defconfig b/arch/arm64/configs/openeuler_defconfig
index ac6fe20d1..33acc1aad 100644
--- a/arch/arm64/configs/openeuler_defconfig
+++ b/arch/arm64/configs/openeuler_defconfig
@@ -90,12 +90,13 @@ CONFIG_BPF_JIT_DEFAULT_ON=y
 # CONFIG_BPF_LSM is not set
 # end of BPF subsystem
 
-CONFIG_PREEMPT_NONE_BUILD=y
-CONFIG_PREEMPT_NONE=y
+# CONFIG_PREEMPT_NONE_BUILD is not set
+# CONFIG_PREEMPT_NONE is not set
 # CONFIG_PREEMPT_VOLUNTARY is not set
 # CONFIG_PREEMPT is not set
 # CONFIG_PREEMPT_DYNAMIC is not set
 # CONFIG_SCHED_CORE is not set
+CONFIG_PREEMPT_RT=y
 
 #
 # CPU/Task time and stats accounting
diff --git a/arch/x86/configs/openeuler_defconfig b/arch/x86/configs/openeuler_defconfig
index 46f23d81b..cec1a30e2 100644
--- a/arch/x86/configs/openeuler_defconfig
+++ b/arch/x86/configs/openeuler_defconfig
@@ -110,13 +110,14 @@ CONFIG_BPF_JIT_DEFAULT_ON=y
 # end of BPF subsystem
 
 CONFIG_PREEMPT_BUILD=y
-CONFIG_PREEMPT_NONE=y
+#CONFIG_PREEMPT_NONE is not set
 # CONFIG_PREEMPT_VOLUNTARY is not set
 # CONFIG_PREEMPT is not set
 CONFIG_PREEMPT_COUNT=y
 CONFIG_PREEMPTION=y
 CONFIG_PREEMPT_DYNAMIC=y
 # CONFIG_SCHED_CORE is not set
+CONFIG_PREEMPT_RT=y
 
 #
 # CPU/Task time and stats accounting
@@ -231,7 +232,7 @@ CONFIG_SYSCTL=y
 CONFIG_HAVE_UID16=y
 CONFIG_SYSCTL_EXCEPTION_TRACE=y
 CONFIG_HAVE_PCSPKR_PLATFORM=y
-# CONFIG_EXPERT is not set
+CONFIG_EXPERT=y
 CONFIG_UID16=y
 CONFIG_MULTIUSER=y
 CONFIG_SGETMASK_SYSCALL=y
-- 
2.36.1

